# 微服务设计

[TOC]

我的第三篇读书笔记

![microservice design](microservice design.jpg)

## 第3章 如何建模服务

### 什么样的服务是好服务

- 两个原则
  - 松耦合
    - 修改一个服务不需要修改另一个
    - 微服务的重要特性之一
      - 每个服务独立修改，不会影响系统的其它部分
    - 限制服务之间的调用形式
    - 过度的通信会导致紧耦合
  - 高内聚
    - 修改最好发生在同一个地方
    - 修改的地方太多，会导致同时发布多个微服务，风险太高
    - 关键在于找到**问题域的边界**
- 限界上下文
  - [一个由显式边界限定的特定职责](http:// blog.sapiensworks.com/post/2012/04/17/DDD-The-Bounded-Context-Explained.aspx)
    - 只能使用模型与它的显式边界通信
  - 任何领域包含多个限界上下文
  - 每个限界上下文有两部分
    - 需要与外部通信的
    - 不需要与外部通信的
  - 每个限界上下文有明确接口
    - 接口决定暴露哪些模型给其它上下文
- 共享的隐藏模型
  - 共享特定的模型，不要共享内部表示
- 模块与服务
  - 服务边界与领域的限界上下文保持一致，这是高内聚低耦合微服务架构的第一步
- 从功能上考虑限界上下文
- 逐步划分上下文
  - 识别粗粒度上下文
    - 它们包含嵌套的上下文
      - 嵌套上下文不直接对外可见，对模块的调用透明的映射到更多的内部服务
      - 或者嵌套上下文作为顶层微服务
      - 取决于组织结构
- 关于业务概念的沟通
  - 业务领域的建模不应止于限界上下文
  - 组织内部共享的术语和想法，应该反映到服务接口
  - 以与组织内部通信相同的方式，思考微服务之间的通信形式非常有用。
- 技术边界
  - 按业务、地理位置、组织结构垂直划分服务
  - 不要按技术实现的分层结构划分服务



---

申请微信公众号有很长时间了，一直没有想清楚究竟应该发一些什么。后来想应该分享一些自己的原创思想和IT从业感悟，花了很长时间我才接受一个事实：我没有能力分享什么原创思想。T_T

最近我想到平时没事会读各种书，不如就把读书笔记分享到公众号。

> 本人在此做以下承诺
>
> - 我不创造知识，我只是知识的搬运工。
> - 所有文章只在本订阅号发布，同时会同步到github（https://github.com/runfriends/notes.git）
> - 所有内容都是本人平时读书记录的笔记和自己的心得感想
> - 绝不转发、抄袭他人文章，如果我的文章侵犯了您的权益请告知，本人会立即删除，并公开道歉

帖上订阅号二维码：

![qrcode_for_weixin_subscription](https://github.com/runfriends/notes/blob/master/qrcode_for_weixin_subscription.jpg?raw=true)